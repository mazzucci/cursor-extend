"""{{ tool_name }} - HTTP API utilities

Generated by cursor-extend. This is a pure Python module - no MCP dependency.
Use it in Cursor, terminal, scripts, notebooks, or anywhere Python runs.

Usage:
    from {{ tool_name | replace('-', '_') }} import query_api
    
    # Customize query_api() for your specific API needs
    # Add your own API-specific functions below
    
    result = await query_api("endpoint", {"param": "value"})

For complete examples (Hacker News, GitHub, etc.), see: docs/EXAMPLES.md
"""

import httpx
import os
from typing import Dict, Any, Optional


# Configuration - customize for your API
API_BASE_URL = os.getenv("API_BASE_URL", "https://api.example.com")
API_TOKEN = os.getenv("API_TOKEN", "")  # Optional: for authenticated APIs


async def query_api(
    endpoint: str,
    params: Optional[Dict[str, str]] = None
) -> Dict[str, Any]:
    """Query an API endpoint (generic function for any HTTP API)
    
    This tool runs locally and inherits your environment:
    - For internal APIs: Inherits VPN connection and credentials
    - For external APIs: Works with any public or authenticated HTTP API
    
    Args:
        endpoint: API endpoint path (e.g., "debug/customer", "weather")
        params: Optional query parameters (e.g., {"id": "12345"})
        
    Returns:
        JSON response from the API
        
    Examples:
        >>> result = await query_api("debug/customer", {"id": "12345"})
        >>> print(result)
        
    Customize this function for your specific needs!
    """
    headers = {}
    if API_TOKEN:
        headers["Authorization"] = f"Bearer {API_TOKEN}"
    
    url = f"{API_BASE_URL}/{endpoint.lstrip('/')}"
    
    try:
        async with httpx.AsyncClient(timeout=30.0) as client:
            response = await client.get(url, params=params, headers=headers)
            response.raise_for_status()
            return response.json()
    except httpx.HTTPStatusError as e:
        return {
            "error": f"HTTP {e.response.status_code}",
            "message": str(e),
            "url": str(e.request.url)
        }
    except httpx.RequestError as e:
        return {
            "error": "Request failed",
            "message": str(e),
            "hint": "Check network connectivity and API accessibility"
        }


# Add your API-specific functions here
# For examples, see: docs/EXAMPLES.md

